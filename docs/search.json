[
  {
    "objectID": "data.html#technical-description",
    "href": "data.html#technical-description",
    "title": "2  Data",
    "section": "2.1 Technical Description",
    "text": "2.1 Technical Description\n\n2.1.1 About the data:\nThis is the New York City Rat Sightings Dataset, collected from NYC Open Data.\n\nLink to Data Source: NYC Rat sightings dataset\n\nThe data comes from 311 service requests and we imported the data directly from the link above using NYC Open Data’s csv API, downloaded onto our local system and then used it for the analysis.\n\n\n2.1.2 Data update frequency on the website:\nEveryday 9AM EST. This dataset contains various columns representing different aspects of rat sightings in New York City from 2010 to present day and is updated daily on the NYC Open Data Platform.\n\n\n2.1.3 Descriptive stats about the data:\nThe data has 31 features with 232,536 rows. We have not detailed all the 31 features but instead only the ones which will be mainly used for our analysis. An overall description of the features is given in the data addendum section.\n\nCreated Date: The date and time when the sighting report was created. This will be important for a time series analysis of the dataset.\nLocation Type [loc_type]: The type of location where the sighting occurred. This categoric feature has 23 levels. Each level can be used to split the data for analyzing in-depth trends.\nIncident Zip [zip]: The ZIP code where the sighting occurred. Used for geospatial analysis of the data.\nStatus [status]: The current status of the sighting report. This has 7 levels - Pending, Closed, Assigned, In-Progress, Open, Draft, Unspecified.\nBorough [bor]: The borough in which the sighting occurred. This has 6 levels Queens, Brooklyn, Manhattan, Bronx, Staten Island and Unspecified.\nLatitude [lat]: The latitude of the sighting location. Used for geo-spatial mapping of sightings.\nLongitude [long]: The longitude of the sighting location. Used for geo-spatial mapping of sightings"
  },
  {
    "objectID": "data.html#research-plan",
    "href": "data.html#research-plan",
    "title": "2  Data",
    "section": "2.2 Research Plan:",
    "text": "2.2 Research Plan:\n1. Breakdown of research objectives\n\nPrimary Objective:\n\n\nUnderstand patterns and trends of rat sightings in New York City.\n\n\nSecondary Objectives:\n\n\nInvestigating the seasonal and yearly trends in rat sightings.\nIdentifying hotspots for rat sightings.\nInvestigating trends around whether a rat sighting 311 request is closed.\n\n2. Data Exploration\n\nPrimary features we will use for analysing this dataset:\n\nCreated Date for time series analysis\nIncident Zip, Latitude, Longitude for geospatial analysis and plotting maps of rat sightings using clustering techniques\nLocation Type, Borough, Status for finding correlations.\n\n\n3. Descriptive Analysis\n\nInitial Overview: Summary statistics and basic visualizations.\nTemporal Analysis: Time-based trend analysis, segmented by categorical features like borough, location type.\nGeographical Analysis: Map-based visualizations.\nCorrelation Analysis: Analysis of correlated categorical variables like year range, status, borough, location type."
  },
  {
    "objectID": "data.html#missing-value-analysis",
    "href": "data.html#missing-value-analysis",
    "title": "2  Data",
    "section": "2.3 Missing value analysis",
    "text": "2.3 Missing value analysis\n\n2.3.1 Table of columns with missing values and their % missing out of the total data.\n\n\nCode\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(ggplot2)\n\n# Reading dataset\n#\"/Users/kaitlynbrown/Desktop/STAT5702/Rat_Sightings.csv\"\ndata &lt;- read.csv(\"/Users/kaitlynbrown/Desktop/STAT5702/Rat_Sightings.csv\")\nreplace_blanks_with_na &lt;- function(x) {\n  if (is.character(x)) {\n    return(ifelse(x == \"\", NA, x))\n  } else if (is.integer(x)) {\n    return(ifelse(x == 0, NA_integer_, x)) # Replace '0' with NA for integers\n  } else {\n    return(x)\n  }\n}\n# replace every blank entry with NA\ndata &lt;- data |&gt; \n  mutate(across(everything(), replace_blanks_with_na))\n\n\n#renaming columns which are essential for our analysis\ncnames&lt;- colnames(data)\n\n#renaming these columns\ndata &lt;- data |&gt; \nrename(\n    key = names(data)[1], \n    loc_type = names(data)[8], \n    zip = names(data)[9],\n    add = names(data)[10],\n    add_type = names(data)[16],\n    city = names(data)[17],\n    status = names(data)[20],\n    due = names(data)[21],\n    bor = names(data)[24],\n    lat = names(data)[29],\n    long = names(data)[30]\n  )\n\n# Total number of rows in the dataset\ntotal_rows &lt;- nrow(data)\n\n# Calculate missing values count and percentage for each column\nmissing_values &lt;- data |&gt; \n  summarise(across(everything(), ~sum(is.na(.)))) |&gt;\n  pivot_longer(cols = everything(), names_to = \"Feature\", values_to = \"count_missing\") |&gt;\n  mutate(percentage_missing = round((count_missing / total_rows) * 100, 2)) |&gt;\n  filter(count_missing &gt; 0) |&gt; # Filter out columns with no missing values\n  arrange(desc(percentage_missing)) # Arrange in descending order of missing percentage\n# Print the result\nprint(missing_values)\n\n\n# A tibble: 23 × 3\n   Feature               count_missing percentage_missing\n   &lt;chr&gt;                         &lt;int&gt;              &lt;dbl&gt;\n 1 Landmark                     138744              59.7 \n 2 Intersection.Street.1        118273              50.9 \n 3 Intersection.Street.2        118233              50.8 \n 4 Facility.Type                107309              46.2 \n 5 due                          100304              43.1 \n 6 Cross.Street.1                26376              11.3 \n 7 Cross.Street.2                26365              11.3 \n 8 Closed.Date                   17364               7.47\n 9 add                           10942               4.71\n10 Street.Name                   10943               4.71\n# ℹ 13 more rows\n\n\nWe plot a chart which shows all columns and their missing values:\n\n\nCode\nlibrary(naniar)\nlibrary(tidyr)\nlibrary(ggplot2)\nlibrary(scales)\n\n# Visualize missing values in each column\nplot &lt;- gg_miss_var(data)\n\n# Modify the x-axis labels to display in the form of 1000's\nplot + scale_y_continuous(labels = label_number_si()) +\n  labs(\n    title = \"Missing Data Visualization for all columns\",\n    x = \"Column Names\",\n    y = \"Missing Values (in thousands)\"\n  )\n\n\n\n\n\nIn the next step, we drop the following columns:\n\nColumns with more than 10% missing values\nColumns which are non-essential to our analysis. The list of essential columns is given in the descriptive stats section of this page.\n\nRevised plot of analysis essential columns which have less than 10% missing values:\n\n\nCode\nlibrary(naniar)\nlibrary(tidyr)\nlibrary(ggplot2)\nlibrary(scales)\n\n# Picking only columns with less than 10% missing values and those which are essential to our analysis.\n\ncolumns_over_10_percent_missing &lt;- missing_values %&gt;%\n  filter(percentage_missing &gt; 10) %&gt;%\n  pull(Feature)\n\n#remove columns with over 10% missing values\ncleaned_data &lt;- data |&gt; \n  select(-all_of(columns_over_10_percent_missing))\n\n# select only those columns relevant to the analysis\ncleaned_data &lt;- data |&gt;\n  select(1,8,10,16,17,20,24,29,30)\n\n\n# Visualize missing values in each column\nplot &lt;- gg_miss_var(cleaned_data)\n\n# Modify the x-axis labels to display in the form of 1000's\nplot + scale_y_continuous(labels = label_number_si()) +\n  labs(\n    title = \"Revised plot with essential columns having &lt; 10% missing values\",\n    x = \"Column Names\",\n    y = \"Missing Values (in thousands)\"\n  )\n\n\n\n\n\nAdditional visuals on columns with missing data:\nUsing the Redav library for plotting missing values with % instead of absolute counts.\n\n\nCode\nlibrary(redav)\nlibrary(dplyr)\n\nplot_missing(cleaned_data, percent = TRUE)\n\n\n\n\n\nConclusion from missing data analysis:\n\nAs per our analysis - Address , Address type, City, Longitude and Latitude of rat sightings are the ones with the highest missing values (still under 10%). We cannot impute these missing values by any means and our final analysis removed rows which had these missing values."
  },
  {
    "objectID": "addendum.html",
    "href": "addendum.html",
    "title": "6  List of all features in the NYC Rat sightings dataset",
    "section": "",
    "text": "Unique Key: A unique identifier for each sighting report. Created Date: The date and time when the sighting report was created. Closed Date: The date and time when the sighting report was resolved or closed. Agency: The agency responsible for handling the sighting report. Agency Name: The full name of the agency responsible for the report. Complaint Type: The type of complaint or issue reported. Descriptor: Additional details about the complaint. Location Type: The type of location where the sighting occurred. Incident Zip: The ZIP code where the sighting occurred. Incident Address: The specific address of the sighting. Street Name: The name of the street where the sighting occurred. Cross Street 1: The first cross street near the sighting location. Cross Street 2: The second cross street near the sighting location. Intersection Street 1: One street at the nearest intersection. Intersection Street 2: The other street at the nearest intersection. Address Type: The type of address provided for the sighting. City: The city where the sighting occurred. Landmark: Any landmark near the sighting location. Facility Type: The type of facility where the sighting occurred. Status: The current status of the sighting report. Due Date: The due date for resolving the report. Resolution Action Updated Date: The last date when the resolution action was updated. Community Board: The community board associated with the sighting location. Borough: The borough in which the sighting occurred. X Coordinate (State Plane): The X coordinate of the sighting location in the State Plane Coordinate System. Y Coordinate (State Plane): The Y coordinate of the sighting location in the State Plane Coordinate System. Park Facility Name: The name of the park facility near the sighting. Park Borough: The borough of the park near the sighting. Latitude: The latitude of the sighting location. Longitude: The longitude of the sighting location. Location: A textual representation of the sighting location, usually combining latitude and longitude."
  },
  {
    "objectID": "addendum.html#list-of-all-features-in-the-nyc-rat-sightings-dataset",
    "href": "addendum.html#list-of-all-features-in-the-nyc-rat-sightings-dataset",
    "title": "6  Addendum",
    "section": "6.1 List of all features in the NYC Rat sightings dataset",
    "text": "6.1 List of all features in the NYC Rat sightings dataset\n\nUnique Key: A unique identifier for each sighting report.\nCreated Date: The date and time when the sighting report was created.\nClosed Date: The date and time when the sighting report was resolved or closed.\nAgency: The agency responsible for handling the sighting report.\nAgency Name: The full name of the agency responsible for the report.\nComplaint Type: The type of complaint or issue reported.\nDescriptor: Additional details about the complaint.\nLocation Type: The type of location where the sighting occurred.\nIncident Zip: The ZIP code where the sighting occurred.\nIncident Address: The specific address of the sighting.\nStreet Name: The name of the street where the sighting occurred.\nCross Street 1: The first cross street near the sighting location.\nCross Street 2: The second cross street near the sighting location.\nIntersection Street 1: One street at the nearest intersection.\nIntersection Street 2: The other street at the nearest intersection.\nAddress Type: The type of address provided for the sighting.\nCity: The city where the sighting occurred.\nLandmark: Any landmark near the sighting location.\nFacility Type: The type of facility where the sighting occurred.\nStatus: The current status of the sighting report.\nDue Date: The due date for resolving the report.\nResolution Action Updated Date: The last date when the resolution action was updated.\nCommunity Board: The community board associated with the sighting location.\nBorough: The borough in which the sighting occurred.\nX Coordinate (State Plane): The X coordinate of the sighting location in the State Plane Coordinate System.\nY Coordinate (State Plane): The Y coordinate of the sighting location in the State Plane Coordinate System.\nPark Facility Name: The name of the park facility near the sighting.\nPark Borough: The borough of the park near the sighting. Same as the Borough\nLatitude: The latitude of the sighting location.\nLongitude: The longitude of the sighting location.\nLocation: Combines latitude and longitude."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "NYC Rat Sightings",
    "section": "",
    "text": "1 Introduction\nAs most residents know, there is a large and increasing rat population in New York City. In fact, it has been estimated that the rat population is now up to 3 million in 2023 (1). There has also been increasing discussion of the city’s rat problem in the media and by political figures. In April, Mayor Adams announced that there would now be a citywide director of rat mitigation (or “Rat Czar”) and appointed Kathleen Corradi to the position with the goal of reducing the city’s rat population (2). This announcement was also accompanied by a $3.5 million investment towards rat reduction work specifically in Harlem (2). As Corradi expressed, “Rats are a symptom of systemic issues, including sanitation, health, housing, and economic justice” (2).\nGiven this, it is clear that having a better understanding of NYC’s rat problem through data analysis and visualization is insightful and important to better understand inequities across the city. Additionally, with these new rat mitigation initiatives being implemented, having more information and insights about the current rat population will be useful to establish baseline trends. Those baseline trends could be re-evaluated and compared against in the future to better understand the effect of these rat migration initiatives. Finally, there are public health ramifications to NYC’s rat problem. A study conducted by Columbia University’s Mailman School of Public Health identified dangerous pathogens such as Salmonella, C.difficile, and E. coli on NYC rats (3). These pathogens can be left behind by rats by their saliva, urine, or feces, putting humans (and their pets) at risk of disease (3). The summary of the study also stresses that there is still much unknown about the public health risk of rats to humans and that monitoring of the rat population is needed to prevent dangerous public health situations like the rat-caused Black Death of the 1300s from occurring in the future (3). Clearly, identifying trends in NYC’s rat population through data analysis and visualization is incredibly useful from a public health standpoint.\nWith the NYC Open Data Rat Sightings dataset, we will be able to address three main questions about NYC’s rat population: 1. How has the number of 311-reported rat sightings in NYC changed over time? How does this trend differ across different boroughs and location types? 2. Which regions of NYC have the most rat sightings? How does that change across location types? 3. What factors influence whether a 311 request for a rat sighting is marked as closed?\nSources:\n\nhttps://mandmpestcontrol.com/there-are-now-3-million-rats-in-new-york-city-study/\nhttps://www.nyc.gov/office-of-the-mayor/news/249-23/mayor-adams-anoints-kathleen-corradi-nyc-s-first-ever-rat-czar-#/0\nhttps://www.publichealth.columbia.edu/news/rats-new-york-diseases-they-carry"
  },
  {
    "objectID": "conclusion.html",
    "href": "conclusion.html",
    "title": "5  Conclusion",
    "section": "",
    "text": "The main conclusions of our analysis are the following: 1. There is a seasonal trend in rat sightings, with fewer rats reported at colder times of year. This seasonal trend is not as strong in 3+ family apartment buildings, with rat sightings being more consistent across the seasons. 2. Rat sightings in NYC have increased over the past 13 years, particularly in Brooklyn and Manhattan. 3. Rat sightings are most common in Manhattan, Brooklyn, and the Bronx. The main hotspots are in the Upper West Side, particularly the 10025 zip code, and a few zip codes in upper Brooklyn. 4. The vast majority of 311 requests for rat sightings are eventually closed, and the number of unclosed requests has consistently decreased over the past 13 years. This is true across location and location type.\nThe main limitation of our analysis was a lack of data on general trends in NYC population and housing. In certain cases, this made it difficult to establish whether certain trends in rat sightings that appeared in the plots were true or whether the plots were simply reflecting underlying population and housing trends in NYC.\nFuture directions for this project would be to consider supplementing this analysis with other data sources, such as NYC population and housing. More affirmative conclusions could then be made in certain cases. Additional questions could also be asked, particularly ones pertaining to previous NYC programs designed to reduce the prevalence of rats. It would be interesting to see where and when these programs have taken place and whether there is a noticeable impact in the rat sightings data at these locations and times. It would be interesting to consider the length of time for these 311 requests to be closed, and what factors influence that."
  },
  {
    "objectID": "results.html",
    "href": "results.html",
    "title": "3  Results",
    "section": "",
    "text": "Data pre-processing\n\n\nCode\n# Data pre-processing for results and analysis\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(scales)\nlibrary(forcats)\nlibrary(ggmap)\nlibrary(sf)\nlibrary(readxl)\nlibrary(tmap)\nlibrary(vcd)\nlibrary(lubridate)\nlibrary(viridis)\n\ndf &lt;- read.csv(\"/Users/kaitlynbrown/Desktop/STAT5702/Rat_Sightings.csv\")\ndf&lt;- mutate(df, Created.Date = as.Date(Created.Date, format = \"%m-%d-%Y\"))\n#\"/Users/kaitlynbrown/Desktop/STAT5702/Rat_Sightings.csv\"\ndf$Year &lt;- year(df$Created.Date)\n#df2: used for rat sightings per day by borugh\ndf2 &lt;- df[df$Borough != \"Unspecified\",]\ndf2 &lt;- df2[df2$Borough != \"\",]\n\n# List of location types in NYC\nlocations = list(\"3+ Family Mixed Use Building\", \"3+ Family Apt. Building\", \"1-2 Family Dwelling\", \"1-2 Family Mixed Use Building\", \"Commercial Building\")\n\n#df3 : used for rat sightings per day by borough\ndf3 &lt;- df[df$Location.Type %in% locations,]\n\n\n# Calling stadia map\nregister_stadiamaps('e51b7311-980d-4703-bc7d-9afa1014b3c1')\nnyc_map &lt;- get_stadiamap(bbox = c(left = -74.2591, bottom = 40.4774, \n                                 right = -73.7002, top = 40.9162),\n                        zoom = 10, maptype = \"stamen_toner_lite\")\n\n# Sampling the map\ndf_sample = sample_n(df, nrow(df)/10)\n\n# Getting zipcode shape file\nzipcodes = st_read(\"/Users/kaitlynbrown/Desktop/STAT5702/nyc.shp\",quiet=TRUE)\n# KB's file path : '/Users/kaitlynbrown/Desktop/STAT5702/nyc.shp'\n# Making the zipcode shape \nzipcodes &lt;- zipcodes %&gt;% \n       rename(Incident.Zip = 'modzcta')\n\ndf4 &lt;- df %&gt;% group_by(Incident.Zip) %&gt;% \n  summarise(total_count=n(),\n            .groups = 'drop')\n\nmap_df &lt;- left_join(zipcodes, df4)\n\n# Create dataframe for summarizing for incident and location type\ndf5 &lt;- df3 %&gt;% group_by(Incident.Zip, Location.Type) %&gt;% \n  summarise(total_count=n(),\n            .groups = 'drop')\n\n# Create dataframe grouped by location type\ndf6 &lt;- df3 %&gt;% group_by(Location.Type) %&gt;% \n  summarise(total_count_loc=n(),\n            .groups = 'drop')\n\n# Left join summarized (incident and location type charts) with dataframe grouped by location type and add a total count column as a percentage of total location count\ndf5 &lt;- left_join(df5,df6)\ndf5$total_count &lt;- df5$total_count / df5$total_count_loc\n\n# Create a dataframe by joining zipcodes with the combined (location type, %total counts,source mapped)\nmap_df2 &lt;- left_join(zipcodes, df5)\n\n# Creating a dataframe by grouping years together.\ndf7 &lt;- mutate(df3, Year.Range = case_when(\n    Created.Date &lt; as.Date(\"01-01-2014\", format = \"%m-%d-%Y\") ~ \"2010-2013\",\n    Created.Date &lt; as.Date(\"01-01-2018\", format = \"%m-%d-%Y\") & Created.Date &gt;= as.Date(\"01-01-2014\", format = \"%m-%d-%Y\") ~ \"2014-2017\",\n    Created.Date &lt; as.Date(\"01-01-2022\", format = \"%m-%d-%Y\") & Created.Date &gt;= as.Date(\"01-01-2018\", format = \"%m-%d-%Y\") ~ \"2018-2021\",\n    Created.Date &gt;= as.Date(\"01-01-2022\", format = \"%m-%d-%Y\") ~ \"2022-2023\"\n    ))\n\n#Changing the name of the status of rat sighting actions in the dataframe\ndf7 &lt;- mutate(df7, Status = case_when(\n    Status == \"Closed\" ~ \"Closed\",\n    Status == \"Pending\" ~ \"Not Closed\",\n    Status == \"Assigned\" ~ \"Not Closed\",\n    Status == \"In Progress\" ~ \"Not Closed\",\n    Status == \"Open\" ~ \"Not Closed\",\n    Status == \"Unspecified\" ~ \"Not Closed\"))\n\n# Cleaning out the dataset with low % categories\ndf7 &lt;- df7[df7$Borough != 'STATEN ISLAND',]\ndf7 &lt;- df7[df7$Borough != 'Unspecified',]\ndf7 &lt;- df7[df7$Location.Type != '3+ Family Mixed Use Building',]\ndf7 &lt;- df7[df7$Location.Type != '1-2 Family Mixed Use Building',]\n\n\nQuestion 1: How has the number of 311-reported rat sightings in NYC changed over time? How does this trend differ across different boroughs and location types?\n\n\nCode\n# Plot 1: Rat sightings per day\n# Count sightings per year\nggplot(df, aes(Created.Date)) +\n    geom_bar(stat=\"count\", na.rm = TRUE) +\n    ggtitle(\"Rat Sightings per Day\") +\n    xlab(\"Date\") + ylab(\"Number of Sightings\") +\n    scale_x_date(labels=date_format (\"%m-%d-%Y\"))\n\n\n\n\n\nWe can see that there is a seasonal cycle in 311 requests for rat sightings. Sightings are lowest and the beginning and ends of the year and peak mid-year. This indicates that rat sightings may be positively correlated with warmer temperatures. We can also see that rat sightings have increased overall over the past 13 years, with the sharpest increases in the mid 2010s and in 2021 and 2022.\n\n\nCode\nggplot(df2, aes(Created.Date)) +\n    geom_bar(stat=\"count\", na.rm = TRUE) +\n    ggtitle(\"Rat Sightings per Day by Borough\") +\n    xlab(\"Date\") + ylab(\"Number of Sightings\") +\n    scale_x_date(labels=date_format (\"%m-%d-%Y\")) +\n    facet_wrap(~Borough)\n\n\n\n\n\nFaceting by borough, we see that the seasonal trend holds true across the boroughs. We can see differences in the overall trend across the boroughs. The Bronx, Queens, and Staten Island have generally seen an increase in sightings over the past 13 years. Brooklyn and Manhattan, however, have seen much sharper increases.\n\n\nCode\n# Plot 5: Overall Rat sightings by location type\ndf_filtered &lt;- df %&gt;%\n  group_by(Location.Type) %&gt;%\n  summarize(Count = n()) %&gt;%\n  filter(Count &gt;= 10000) %&gt;%\n  right_join(df, by = \"Location.Type\")\n\n# Plotting\nggplot(df_filtered, aes(fct_infreq(Location.Type))) +\n    geom_bar(stat=\"count\", na.rm = TRUE) +\n    ggtitle(\"Rat sightings by building type\")+\n    xlab(\"Number of Sightings\") +  # Label for the x-axis\n    ylab(\"Location Type\") +  # Label for the y-axis\n    theme(\n        axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1, size = 8),  # Customize x-axis text\n        axis.text.y = element_text(size = 8)  # Customize y-axis text\n    )\n\n\n\n\n\nWe can see that the most common locations for rat sightings are 3+ family apartments, 1-2 family dwellings, 3+ family mixed use buildings, and commercial buildings. Of course, this is likely due to the fact that these location types are more prevalent in NYC than the other location types. We cannot conclude that rats are more likely to be sighted in these location types without information on the prevalence of these location types in NYC. However, this information is useful for the following analysis and knowing which location types to focus on.\n\n\nCode\nggplot(df3, aes(Created.Date)) +\n    geom_bar(stat=\"count\", na.rm = TRUE) +\n    ggtitle(\"Rat Sightings per Day by Borough\") +\n    xlab(\"Date\") + ylab(\"Number of Sightings\") +\n    scale_x_date(labels=date_format (\"%m-%d-%Y\")) +\n    facet_wrap(~Location.Type)\n\n\n\n\n\nWe can see that there is one apparent difference in the trend of rat sightings over time for different location types. 3+ family apartment buildings do not have as strong of a seasonal trend as the other location types. This indicates that the change in temperature does not affect the presence of rats within apartment buildings as significantly as it does for businesses or homes. The overall trend is also a much sharper increase in sightings for 3+ family apartment buildings and commercial buildings than the other location types.\nQuestion 2: Which regions of NYC have the most rat sightings? How does that change across location types?\n\n\nCode\n# Plot 2: OVerall concentration of Rat Sightings so far on an NYC Map using geo-coordinates\nlibrary(ggmap)\nggmap(nyc_map) +\n  geom_point(data = df_sample, aes(x=Longitude,y=Latitude), size = 0.005, color = 'orange')+\n  ggtitle(\"Total rat sightings since 2010\")\n\n\n\n\n\nThis plot shows a random sample of just 10% of all 311 requests for rat sightings across the city. We can see that sightings are most dense in Manhattan, upper Brooklyn, and the Bronx. Before affirmatively concluding that one is more likely to see rats in these areas, it is still important to consider the differences in the population density of these areas.\n\n\nCode\nlibrary(tmap)\n\ntmap_mode(\"view\")\ntm_shape(map_df) +\n  tm_polygons(\"total_count\", id = 'Incident Zip', palette = \"viridis\") +\n  tm_bubbles(size = 0.05, popup.vars = c(\"Zip Code\" = \"Incident.Zip\"))+\n  tm_layout(\"Rat Sightings from 2010-2023 by Zip Code\",\n            title.size = 0.95, frame = FALSE)\n\n\n\n\n\n\n\nThis plot allows us to look at the location of rat sightings on a more specific scale by zip code. Here, one trend that could not be seen in the previous plot is apparent. The Upper West side, particularly the 10025 zip code has many more rat sightings than the rest of Manhattan.\n\n\nCode\nlibrary(tmap)\nlibrary(viridis)\n\n# Setting tmap to interactive viewing mode\ntmap_mode(\"view\")\n\n# Create the faceted plot without legends\ntm_shape(map_df2) +\n  tm_polygons(\"total_count\", palette = \"viridis\", show.legend = FALSE) +\n  tm_facets(by = \"Location.Type\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nWe can also consider this plot faceted by the most common location types. The biggest noticeable difference here is that the zip codes in Brooklyn are the strongest hotspots for 1-2 family dwellings, 1-2 family mixed use buildings, and 3+ family apartment buildings. The Upper West side hotspot is strongest for 3+ family apartment buildings and 3+ mixed use buildings. Again, it is important to consider the underlying distributions here and which location types are generally more common in these zip codes.\nQuestion 3: What factors influence whether a 311 request for a rat sighting is marked as closed?\n\n\nCode\n# Plot 8\nlibrary(forcats)\nlibrary(scales)\n\ntotal_count &lt;- sum(table(df7$Status))\n\nggplot(df7, aes(x = fct_infreq(Status))) +\n    geom_bar(aes(y = ..count.. / total_count * 100), stat=\"count\", na.rm = TRUE) +\n    geom_text(aes(label = scales::percent(..count.. / total_count, accuracy = 1),\n                  y = ..count.. / total_count * 100), \n              stat=\"count\", vjust = -0.5) +  # Add percentage labels\n    ggtitle(\"Closed vs Unclosed Cases\") +\n    xlab(\"Status\") +\n    ylab(\"Percentage (%)\") +\n    scale_y_continuous(labels = scales::percent_format(scale = 1)) +\n    theme(axis.text.x = element_text(angle = 0, vjust = 0.5, hjust=1))\n\n\n\n\n\nHere, we can see that the vast majority of 311 requests for rat sightings in the past 13 years have been marked as closed. The remaining are primarily pending, in progress, or assigned.\n\n\nCode\ndf7_grouped &lt;- df7 %&gt;%\n  count(Borough, Status) %&gt;%\n  group_by(Borough) %&gt;%\n  mutate(Percent = n / sum(n))\n\n# Create the plot\nggplot(df7_grouped, aes(x = Borough, y = Percent, fill = Status)) +\n  geom_bar(stat = \"identity\", position = position_dodge()) +\n  geom_text(aes(label = scales::percent(Percent, accuracy = 1)),\n            position = position_dodge(width = 0.9), vjust = -0.5, size = 3) +\n  ggtitle(\"Closed vs Unclosed Cases by Borough\") +\n  xlab(\"Borough\") +\n  ylab(\"Percentage (%)\") +\n  scale_fill_manual(values = c(\"Closed\" = \"lightgreen\", \"Pending\" = \"lightyellow\")) +\n  theme(\n    axis.text.x = element_text(angle = 0, hjust = 1, size = 8),  \n    axis.text.y = element_text(size = 8),  \n    plot.title = element_text(size = 16)  \n  )\n\n\n\n\n\nThis is true across boroughs.\n\n\nCode\n#Plot 9: Plotting a mosaic plot, using Borugh as a categoric feature\nmosaic(Status ~ Borough + Year.Range, data = df7,\n       labeling = labeling_border(\n         rot_labels = c(0, 0, -60)\n       ),\n       direction = c('v', 'v', 'h'),\n       highlighting_fill = c('green','red'))\n\n\n\n\n\nWe can consider whether the year the request was made is correlated with how likely it is to be marked as closed. We can also consider whether the borough the request was made for is correlated with how likely it is to be marked as closed. Staten Island has been excluded here due to low overall rat sightings. Generally, across all boroughs, the proportion of unclosed requests has consistently decreased over the years. There does not appear to be a correlation between borough and whether a request is closed.\n\n\nCode\n#Plot 10: Plotting a mosaic plot, using Location type as a categoric fearure\nmosaic(Status ~ Location.Type + Year.Range, data = df7,\n       labeling = labeling_border(\n         rot_labels = c(0, 0, -60)\n       ),\n       direction = c('v', 'v', 'h'),\n       main = 'Mosaic plot of rat sightings by Building Type',\n       highlighting_fill = c('green','red'))\n\n\n\n\n\nWe can also see that there does not appear to be a correlation between location type and whether a request is closed. The trend of decreasing proportion of unclosed requests holds true across location types."
  },
  {
    "objectID": "d3graph.html",
    "href": "d3graph.html",
    "title": "4  Interactive graph",
    "section": "",
    "text": "&lt;!DOCTYPE html&gt;\n\n\n\n\nRat Sightings in NYC\n\n\n\n\n\n\n\n\n\n    &lt;label for=\"year-filter\"&gt;Year:&lt;/label&gt;\n    &lt;select id=\"year-filter\"&gt;\n        &lt;option value=\"\"&gt;Select Year&lt;/option&gt;\n        &lt;!-- Year options will be populated here --&gt;\n    &lt;/select&gt;\n    &lt;label for=\"borough-filter\"&gt;Borough:&lt;/label&gt;\n    &lt;select id=\"borough-filter\"&gt;\n        &lt;option value=\"\"&gt;Select Borough&lt;/option&gt;\n        &lt;!-- Borough options will be populated here --&gt;\n    &lt;/select&gt;\n    &lt;label for=\"building-type-filter\"&gt;Building Type:&lt;/label&gt;\n    &lt;select id=\"building-type-filter\"&gt;\n        &lt;option value=\"\"&gt;Select Building Type&lt;/option&gt;\n        &lt;!-- Building type options will be populated here --&gt;\n    &lt;/select&gt;\n&lt;/div&gt;\n&lt;script src=\"scripts/myscript.js\"&gt;&lt;/script&gt;"
  }
]